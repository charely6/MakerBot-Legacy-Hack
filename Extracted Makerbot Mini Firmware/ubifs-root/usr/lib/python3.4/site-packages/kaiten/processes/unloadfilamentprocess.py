import logging
import datetime

import kaiten.activities

from kaiten.processes.loadfilamentprocess import LoadFilamentProcess

class UnloadFilamentProcess(LoadFilamentProcess):
    def __init__(self, machine_manager:object, pymach:object,
                 tool_index:int, config:dict,
                 temperature_settings:list=None):
        super(UnloadFilamentProcess, self).__init__(machine_manager, pymach,
            tool_index, config,
            temperature_settings=temperature_settings)

    def _do_filament_activity(self):
        self._cancellable = False
        self._step_change(self._load_filament_steps.unloading_filament)
        self._log_event("Unload Filament", "unload_filament")
        yield from self._create_and_run_activity(
            kaiten.activities.UnloadFilamentActivity,
            tool_index=self._tool_index)
