import logging

from kaiten.processes.process import Process

class ParkProcess(Process):
    def __init__(self, machine_manager, machine_driver, config):
        super(ParkProcess, self).__init__(machine_manager, machine_driver, config)
        self.ignore_all_toolhead_errors()
        self.cancellable_toolhead_errors = set()

    def _do_run(self):
        self._step_change(self.steps.running)
        yield from self._pymach.move_axis(2,
                                          50,
                                          self._config['max_speed_mm_per_second']['z'],
                                          relative=True)
        yield from self._pru_delay_loop()
        yield from self._pymach.shutdown()

    def _do_cancel(self, error_dict=None):
        yield from self._pymach.motor_abort()
